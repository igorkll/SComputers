{"init.lua": "bG9jYWwgcm9vdGZzID0gLi4uDQoNCmRvDQogICAgbG9jYWwgZnVuY3Rpb24gcmF3X2xvYWRmaWxlKHBhdGgpDQogICAgICAgIHJldHVybiBsb2FkKHJvb3Rmcy5yZWFkRmlsZShwYXRoKSwgIj0iIC4uIHBhdGgpDQogICAgZW5kDQoNCiAgICBsb2NhbCBzeXN0ZW0gPSBhc3NlcnQocmF3X2xvYWRmaWxlKCIvbGlicy9zeXN0ZW0ubHVhIikpKHJvb3RmcykNCmVuZA0KDQpsb2NhbCBzeXN0ZW0gPSByZXF1aXJlKCJzeXN0ZW0iKQ0KbG9jYWwgdmZzID0gcmVxdWlyZSgidmZzIikNCg0KZnVuY3Rpb24gb25TdGFydCgpDQogICAgLS0gbGF1bmNoaW5nIHN5c3RlbSBzZXJ2aWNlcw0KICAgIGxvY2FsIHNlcnZpY2VzUGF0aCA9ICIvc2VydmljZXMiDQogICAgZm9yIF8sIGZpbGUgaW4gaXBhaXJzKHN5c3RlbS5mczpnZXRGaWxlTGlzdChzZXJ2aWNlc1BhdGgpKSBkbw0KICAgICAgICBhc3NlcnQoc3lzdGVtLmV4ZWN1dGUodmZzLmNvbmNhdChzZXJ2aWNlc1BhdGgsIGZpbGUpKSkNCiAgICBlbmQNCg0KICAgIC0tIGFwcGxpY2F0aW9ucyBpbml0aWFsaXphdGlvbg0KICAgIGZvciBfLCBhcHBpbmZvIGluIGlwYWlycyhzeXN0ZW0uaW5zdGFsbGVkQXBwcygpKSBkbw0KICAgICAgICBzeXN0ZW0uaW5pdEFwcChhcHBpbmZvKQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIG9uVGljaygpDQogICAgc3lzdGVtLnByb2Nlc3Nob3N0OnRpY2soKQ0KDQogICAgZm9yIF8sIHByb2Nlc3MgaW4gaXBhaXJzKHN5c3RlbS5wcm9jZXNzaG9zdDpsaXN0KCkpIGRvDQogICAgICAgIGxvY2FsIGVyciA9IHByb2Nlc3M6Z2V0RXJyb3IoKQ0KICAgICAgICBpZiBlcnIgdGhlbg0KICAgICAgICAgICAgZXJyb3IoZXJyLCAyKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBvblN0b3AoKQ0KICAgIHN5c3RlbS5wcm9jZXNzaG9zdDpkZXN0cm95KCkNCmVuZA0KDQpfZW5hYmxlQ2FsbGJhY2tzID0gdHJ1ZQ==", "apps/counter.app/config.json": "ew0KICAgICJ0ZXJtaW5hbCI6IHRydWUsDQogICAgImRpc3BsYXkiOiBmYWxzZSwNCiAgICAiZ3VpIjogZmFsc2UNCn0=", "apps/counter.app/main.lua": "bG9jYWwgc2NyaXB0RGF0YSA9IC4uLg0KbG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCmxvY2FsIHRlcm1pbmFsID0gc2NyaXB0RGF0YS5hcmdzLnRlcm1pbmFsDQoNCmxvY2FsIGNvdW50ZXIgPSAwDQoNCmZ1bmN0aW9uIG9uU3RhcnQoKQ0KZW5kDQoNCmZ1bmN0aW9uIG9uVGljaygpDQogICAgdGVybWluYWwud3JpdGUoY291bnRlciAuLiAiXG4iKQ0KICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMQ0KZW5kDQoNCl9lbmFibGVDYWxsYmFja3MgPSB0cnVl", "apps/echobot.app/config.json": "ew0KICAgICJ0ZXJtaW5hbCI6IHRydWUsDQogICAgImRpc3BsYXkiOiBmYWxzZSwNCiAgICAiZ3VpIjogZmFsc2UNCn0=", "apps/echobot.app/main.lua": "bG9jYWwgc2NyaXB0RGF0YSA9IC4uLg0KbG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCmxvY2FsIHRlcm1pbmFsID0gc2NyaXB0RGF0YS5hcmdzLnRlcm1pbmFsDQoNCmZ1bmN0aW9uIG9uVGljaygpDQogICAgbG9jYWwgdGV4dCA9IHRlcm1pbmFsLnJlYWQoKQ0KICAgIGlmIHRleHQgdGhlbg0KICAgICAgICB0ZXJtaW5hbC53cml0ZSh0ZXh0IC4uICJcbiIpDQogICAgZW5kDQplbmQNCg0KX2VuYWJsZUNhbGxiYWNrcyA9IHRydWU=", "apps/gui_shell.app/config.json": "ew0KICAgICJ0ZXJtaW5hbCI6IGZhbHNlLA0KICAgICJkaXNwbGF5IjogdHJ1ZSwNCiAgICAiZ3VpIjogZmFsc2UsDQogICAgImhpZGRlbiI6IHRydWUNCn0=", "apps/gui_shell.app/main.lua": "bG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCg0KZnVuY3Rpb24gb25UaWNrKCkNCmVuZA0KDQpfZW5hYmxlQ2FsbGJhY2tzID0gdHJ1ZQ==", "apps/hello.app/config.json": "ew0KICAgICJ0ZXJtaW5hbCI6IHRydWUsDQogICAgImRpc3BsYXkiOiBmYWxzZSwNCiAgICAiZ3VpIjogZmFsc2UNCn0=", "apps/hello.app/main.lua": "bG9jYWwgc2NyaXB0RGF0YSA9IC4uLg0KbG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCmxvY2FsIHRlcm1pbmFsID0gc2NyaXB0RGF0YS5hcmdzLnRlcm1pbmFsDQoNCmZ1bmN0aW9uIG9uU3RhcnQoKQ0KICAgIHRlcm1pbmFsLndyaXRlKCJoZWxsbywgd29ybGQhXG4iKQ0KICAgIHN5c3RlbS5jbG9zZUFwcChzY3JpcHREYXRhKQ0KZW5kDQoNCl9lbmFibGVDYWxsYmFja3MgPSB0cnVl", "apps/terminal_shell.app/config.json": "ew0KICAgICJ0ZXJtaW5hbCI6IHRydWUsDQogICAgImRpc3BsYXkiOiBmYWxzZSwNCiAgICAiZ3VpIjogZmFsc2UsDQogICAgImhpZGRlbiI6IHRydWUNCn0=", "apps/terminal_shell.app/main.lua": "bG9jYWwgc2NyaXB0RGF0YSA9IC4uLg0KbG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCmxvY2FsIHRlcm1pbmFsID0gc2NyaXB0RGF0YS5hcmdzLnRlcm1pbmFsDQoNCmxvY2FsIHJ1bm5lZEFwcGxpY2F0aW9uDQoNCmxvY2FsIGZ1bmN0aW9uIHR5cGVTdGFydCgpDQogICAgdGVybWluYWwud3JpdGUoIj4gIikNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBjbGVhcigpDQogICAgdGVybWluYWwuY2xlYXIoKQ0KICAgIHRlcm1pbmFsLndyaXRlKCIjMDBmZjAwc2NyaXB0YWJsZU9TIHRlcm1pbmFsIHNoZWxsXG4iKQ0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIHByaW50QXBwSW5mbyhhcHBpbmZvKQ0KICAgIGxvY2FsIHRhZ3MgPSB7fQ0KICAgIGxvY2FsIGNvbmZpZyA9IHN5c3RlbS5nZXRBcHBDb25maWcoYXBwaW5mbykNCiAgICBpZiBjb25maWcudGVybWluYWwgdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQodGFncywgInRlcm1pbmFsIikNCiAgICBlbmQNCiAgICBpZiBjb25maWcuZGlzcGxheSB0aGVuDQogICAgICAgIHRhYmxlLmluc2VydCh0YWdzLCAiZnVsbCBzY3JlZW4iKQ0KICAgIGVuZA0KICAgIGlmIGNvbmZpZy5ndWkgdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQodGFncywgIndpbmRvd2VkIikNCiAgICBlbmQNCiAgICBpZiBjb25maWcuaGlkZGVuIHRoZW4NCiAgICAgICAgdGFibGUuaW5zZXJ0KHRhZ3MsICJoaWRkZW4iKQ0KICAgIGVuZA0KICAgIGlmIHN5c3RlbS5pc1N5c3RlbUFwcChhcHBpbmZvKSB0aGVuDQogICAgICAgIHRhYmxlLmluc2VydCh0YWdzLCAic3lzdGVtIikNCiAgICBlbmQNCiAgICB0ZXJtaW5hbC53cml0ZShhcHBpbmZvLm5hbWUgLi4gIiA6ICIgLi4gYXBwaW5mby5leGVjIC4uICIgLSAiIC4uIHRhYmxlLmNvbmNhdCh0YWdzLCAiICYgIikgLi4gIlxuIikNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBlcnJvclNwbGFzaChlcnIpDQogICAgdGVybWluYWwud3JpdGUoIiNmZjAwMDAiIC4uIGVyciAuLiAiXG4iKQ0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIGZpbmRBcHBCeU5hbWUobmFtZSkNCiAgICBpZiBub3QgbmFtZSB0aGVuDQogICAgICAgIGVycm9yU3BsYXNoKCJzcGVjaWZ5IHRoZSBuYW1lIG9mIHRoZSBhcHBsaWNhdGlvbiIpDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KDQogICAgbG9jYWwgYXBwaW5mbyA9IHN5c3RlbS5maW5kQXBwQnlOYW1lKG5hbWUpDQogICAgaWYgYXBwaW5mbyB0aGVuDQogICAgICAgIHJldHVybiBhcHBpbmZvDQogICAgZW5kDQoNCiAgICBlcnJvclNwbGFzaCgiZmFpbGVkIHRvIGZpbmQgYXBwIikNCmVuZA0KDQpsb2NhbCBjb21tYW5kcw0KY29tbWFuZHMgPSB7DQogICAgWyJjbG9zZSJdID0gew0KICAgICAgICBkZXNjcmlwdGlvbiA9ICJjbG9zZXMgdGhlIGN1cnJlbnRseSBydW5uaW5nIGFwcGxpY2F0aW9uIChjYW4gYmUgZXhlY3V0ZWQgd2hpbGUgdGhlIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmcpIiwNCiAgICAgICAgcnVubmluZ0FwcGxpY2F0aW9uID0gdHJ1ZSwNCiAgICAgICAgcnVubmluZ1NoZWxsID0gZmFsc2UsDQogICAgICAgIGZ1bmMgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBzeXN0ZW0uY2xvc2VBcHAocnVubmVkQXBwbGljYXRpb24pDQogICAgICAgIGVuZA0KICAgIH0sDQogICAgWyJjdXJyZW50Il0gPSB7DQogICAgICAgIGRlc2NyaXB0aW9uID0gImNsZWFycyB0aGUgdGVybWluYWwgKGNhbiBiZSBleGVjdXRlZCB3aGlsZSB0aGUgYXBwbGljYXRpb24gaXMgcnVubmluZykiLA0KICAgICAgICBydW5uaW5nQXBwbGljYXRpb24gPSB0cnVlLA0KICAgICAgICBydW5uaW5nU2hlbGwgPSBmYWxzZSwNCiAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHRlcm1pbmFsLndyaXRlKHJ1bm5lZEFwcGxpY2F0aW9uLmFwcGluZm8ubmFtZSAuLiAiXG4iKQ0KICAgICAgICBlbmQNCiAgICB9LA0KICAgIFsiY2xlYXIiXSA9IHsNCiAgICAgICAgZGVzY3JpcHRpb24gPSAib3V0cHV0cyB0aGUgbmFtZSBvZiB0aGUgY3VycmVudGx5IHJ1bm5pbmcgYXBwbGljYXRpb24gKGNhbiBiZSBleGVjdXRlZCB3aGlsZSB0aGUgYXBwbGljYXRpb24gaXMgcnVubmluZykiLA0KICAgICAgICBydW5uaW5nQXBwbGljYXRpb24gPSB0cnVlLA0KICAgICAgICBydW5uaW5nU2hlbGwgPSB0cnVlLA0KICAgICAgICBmdW5jID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgY2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICB9LA0KICAgIFsiYXBwbGlzdCJdID0gew0KICAgICAgICBkZXNjcmlwdGlvbiA9ICJkaXNwbGF5cyBhIGxpc3Qgb2YgYXBwbGljYXRpb25zIiwNCiAgICAgICAgcnVubmluZ0FwcGxpY2F0aW9uID0gZmFsc2UsDQogICAgICAgIHJ1bm5pbmdTaGVsbCA9IHRydWUsDQogICAgICAgIGZ1bmMgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgXywgYXBwaW5mbyBpbiBpcGFpcnMoc3lzdGVtLmZpbHRlcmVkQXBwcyh7dGVybWluYWw9dHJ1ZX0pKSBkbw0KICAgICAgICAgICAgICAgIHByaW50QXBwSW5mbyhhcHBpbmZvKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIH0sDQogICAgWyJhbGxhcHBsaXN0Il0gPSB7DQogICAgICAgIGRlc2NyaXB0aW9uID0gImRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgYXBwbGljYXRpb25zLCBpbmNsdWRpbmcgdGhvc2UgdGhhdCBjYW5ub3QgYmUgcnVuIGluIHRoZSB0ZXJtaW5hbCBhbmQgaGlkZGVuIiwNCiAgICAgICAgcnVubmluZ0FwcGxpY2F0aW9uID0gZmFsc2UsDQogICAgICAgIHJ1bm5pbmdTaGVsbCA9IHRydWUsDQogICAgICAgIGZ1bmMgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBmb3IgXywgYXBwaW5mbyBpbiBpcGFpcnMoc3lzdGVtLmluc3RhbGxlZEFwcHMoKSkgZG8NCiAgICAgICAgICAgICAgICBwcmludEFwcEluZm8oYXBwaW5mbykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9LA0KICAgIFsidW5pbnN0YWxsIl0gPSB7DQogICAgICAgIGRlc2NyaXB0aW9uID0gImRlbGV0ZXMgdGhlIGFwcCIsDQogICAgICAgIHJ1bm5pbmdBcHBsaWNhdGlvbiA9IGZhbHNlLA0KICAgICAgICBydW5uaW5nU2hlbGwgPSB0cnVlLA0KICAgICAgICBmdW5jID0gZnVuY3Rpb24oYXJncykNCiAgICAgICAgICAgIGxvY2FsIGFwcGluZm8gPSBmaW5kQXBwQnlOYW1lKGFyZ3NbMV0pDQogICAgICAgICAgICBpZiBhcHBpbmZvIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBzeXN0ZW0uaXNTeXN0ZW1BcHAoYXBwaW5mbykgdGhlbg0KICAgICAgICAgICAgICAgICAgICBlcnJvclNwbGFzaCgidG8gcmVtb3ZlIHRoZSBzeXN0ZW0gYXBwbGljYXRpb24sIHVzZSBmb3JjZVVuaW5zdGFsbCIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzeXN0ZW0udW5pbnN0YWxsQXBwKGFwcGluZm8pDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfSwNCiAgICBbImZvcmNlVW5pbnN0YWxsIl0gPSB7DQogICAgICAgIGRlc2NyaXB0aW9uID0gImRlbGV0ZXMgYXBwbGljYXRpb25zLCBhbGxvd3MgeW91IHRvIGRlbGV0ZSBzeXN0ZW0gYXBwbGljYXRpb25zIiwNCiAgICAgICAgcnVubmluZ0FwcGxpY2F0aW9uID0gZmFsc2UsDQogICAgICAgIHJ1bm5pbmdTaGVsbCA9IHRydWUsDQogICAgICAgIGZ1bmMgPSBmdW5jdGlvbihhcmdzKQ0KICAgICAgICAgICAgbG9jYWwgYXBwaW5mbyA9IGZpbmRBcHBCeU5hbWUoYXJnc1sxXSkNCiAgICAgICAgICAgIGlmIGFwcGluZm8gdGhlbg0KICAgICAgICAgICAgICAgIHN5c3RlbS51bmluc3RhbGxBcHAoYXBwaW5mbykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9LA0KICAgIFsiaGVscCJdID0gew0KICAgICAgICBkZXNjcmlwdGlvbiA9ICJkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIHRoZSBjb21tYW5kcyIsDQogICAgICAgIHJ1bm5pbmdBcHBsaWNhdGlvbiA9IGZhbHNlLA0KICAgICAgICBydW5uaW5nU2hlbGwgPSB0cnVlLA0KICAgICAgICBmdW5jID0gZnVuY3Rpb24oYXJncykNCiAgICAgICAgICAgIGxvY2FsIGNvbW1hbmRzTGlzdCA9IHt9DQogICAgICAgICAgICBmb3IgY21kIGluIHBhaXJzKGNvbW1hbmRzKSBkbw0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjb21tYW5kc0xpc3QsIGNtZCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgdGFibGUuc29ydChjb21tYW5kc0xpc3QpDQogICAgICAgICAgICBmb3IgXywgY21kIGluIGlwYWlycyhjb21tYW5kc0xpc3QpIGRvDQogICAgICAgICAgICAgICAgbG9jYWwgZGVzY3JpcHRpb24gPSBjb21tYW5kc1tjbWRdLmRlc2NyaXB0aW9uDQogICAgICAgICAgICAgICAgdGVybWluYWwud3JpdGUoY21kIC4uIChkZXNjcmlwdGlvbiBhbmQgKCIuICIgLi4gZGVzY3JpcHRpb24pIG9yICIiKSAuLiAiXG4iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIH0NCn0NCg0KbG9jYWwgX3Rlcm1pbmFsX3JlYWQgPSB0ZXJtaW5hbC5yZWFkDQpsb2NhbCBsYXN0VGVybWluYWxSZWFkDQpmdW5jdGlvbiB0ZXJtaW5hbC5yZWFkKCkNCiAgICBsb2NhbCBzdHIgPSBsYXN0VGVybWluYWxSZWFkDQogICAgbGFzdFRlcm1pbmFsUmVhZCA9IG5pbA0KICAgIHJldHVybiBzdHINCmVuZA0KDQpmdW5jdGlvbiBvblN0YXJ0KCkNCiAgICBfdGVybWluYWxfcmVhZCgpDQogICAgY2xlYXIoKQ0KICAgIHR5cGVTdGFydCgpDQplbmQNCg0KZnVuY3Rpb24gb25UaWNrKCkNCiAgICBpZiBydW5uZWRBcHBsaWNhdGlvbiB0aGVuDQogICAgICAgIGlmIG5vdCBzeXN0ZW0uaXNSdW5uaW5nKHJ1bm5lZEFwcGxpY2F0aW9uKSB0aGVuDQogICAgICAgICAgICB0eXBlU3RhcnQoKQ0KICAgICAgICAgICAgcnVubmVkQXBwbGljYXRpb24gPSBuaWwNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgDQogICAgbG9jYWwgY29tbWFuZCA9IF90ZXJtaW5hbF9yZWFkKCkNCiAgICBpZiBjb21tYW5kIHRoZW4NCiAgICAgICAgbG9jYWwgYXJncyA9IHN5c3RlbS5wYXJzZUNvbW1hbmQoY29tbWFuZCkNCiAgICAgICAgbG9jYWwgY21kID0gdGFibGUucmVtb3ZlKGFyZ3MsIDEpDQogICAgICAgIGlmIGNtZCB0aGVuDQogICAgICAgICAgICBsb2NhbCBjb21tYW5kVGFibGUgPSBjb21tYW5kc1tjbWRdDQogICAgICAgICAgICBpZiBydW5uZWRBcHBsaWNhdGlvbiB0aGVuDQogICAgICAgICAgICAgICAgbGFzdFRlcm1pbmFsUmVhZCA9IGNvbW1hbmQNCiAgICAgICAgICAgICAgICBpZiBjb21tYW5kVGFibGUgYW5kIGNvbW1hbmRUYWJsZS5ydW5uaW5nQXBwbGljYXRpb24gdGhlbg0KICAgICAgICAgICAgICAgICAgICBjb21tYW5kVGFibGUuZnVuYyhhcmdzKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRlcm1pbmFsLndyaXRlKGNvbW1hbmQgLi4gIlxuIikNCiAgICAgICAgICAgICAgICBpZiBjb21tYW5kVGFibGUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBjb21tYW5kVGFibGUucnVubmluZ0FwcGxpY2F0aW9uIGFuZCBub3QgY29tbWFuZFRhYmxlLnJ1bm5pbmdTaGVsbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvclNwbGFzaCgidGhpcyBjb21tYW5kIHJlcXVpcmVzIGEgcnVubmluZyBhcHBsaWNhdGlvbiIpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRUYWJsZS5mdW5jKGFyZ3MpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB0eXBlU3RhcnQoKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbGFzdFRlcm1pbmFsUmVhZCA9IG5pbA0KICAgICAgICAgICAgICAgICAgICBhcmdzLnRlcm1pbmFsID0gdGVybWluYWwNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2NyaXB0RGF0YSwgZXJyID0gc3lzdGVtLmV4ZWN1dGUoY21kLCBhcmdzKQ0KICAgICAgICAgICAgICAgICAgICBpZiBzY3JpcHREYXRhIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lZEFwcGxpY2F0aW9uID0gc2NyaXB0RGF0YQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvclNwbGFzaChlcnIpDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlU3RhcnQoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICB0ZXJtaW5hbC53cml0ZSgiXG4iKQ0KICAgICAgICAgICAgdHlwZVN0YXJ0KCkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KX2VuYWJsZUNhbGxiYWNrcyA9IHRydWU=", "libs/system.lua": "bG9jYWwgcm9vdGZzID0gLi4uDQoNCmxvY2FsIHZmcyA9IHJlcXVpcmUoInZmcyIpDQpsb2NhbCByYW1mcyA9IHJlcXVpcmUoInJhbWZzIikNCmxvY2FsIHByb2Nlc3MgPSByZXF1aXJlKCJwcm9jZXNzIikNCmxvY2FsIGVubHVhID0gcmVxdWlyZSgiZW5sdWEiKQ0KbG9jYWwganNvbiA9IHJlcXVpcmUoImpzb24iKQ0KDQpsb2NhbCBzeXN0ZW0gPSB7fQ0Kc3lzdGVtLmluaXRpYWxpemVkQXBwcyA9IHt9DQpzeXN0ZW0uYXBwRGlycyA9IHsiL2FwcHMiLCAiL3VzZXIvYXBwcyJ9DQpzeXN0ZW0ubGliRGlycyA9IHsiL2xpYnMifQ0Kc3lzdGVtLmxvYWRlZExpYnMgPSB7c3lzdGVtID0gc3lzdGVtfQ0KDQpzeXN0ZW0uZnMgPSB2ZnMuY3JlYXRlSG9zdCgpDQpzeXN0ZW0uZnM6bW91bnQoIi8iLCByb290ZnMpDQpzeXN0ZW0uZnM6bW91bnQoIi9yb290Iiwgcm9vdGZzKQ0Kc3lzdGVtLmZzOm1vdW50KCIvdG1wIiwgcmFtZnMuY3JlYXRlKDEwMjQgKiAxMDI0KSkNCg0Kc3lzdGVtLnByb2Nlc3Nob3N0ID0gcHJvY2Vzcy5jcmVhdGVIb3N0KCkNCg0KbG9jYWwgZnVuY3Rpb24gbWFrZUNvbXBvbmVudFByaW1hcnkoY29tcG9uZW50cywgY29tcG9uZW50KQ0KICAgIGZvciBpID0gI2NvbXBvbmVudHMsIDEsIC0xIGRvDQogICAgICAgIGlmIGNvbXBvbmVudHNbaV0gPT0gY29tcG9uZW50IHRoZW4NCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZShjb21wb25lbnRzLCBpKQ0KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGNvbXBvbmVudHMsIDEsIGNvbXBvbmVudCkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIHJhd0V4ZWN1dGUocGF0aCwgYXJncykNCiAgICBhcmdzID0gYXJncyBvciB7fQ0KDQogICAgbG9jYWwgYXBwQ29kZSA9IHN5c3RlbS5mczpwUmVhZEZpbGUocGF0aCkNCiAgICBpZiBub3QgYXBwQ29kZSB0aGVuDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KDQogICAgbG9jYWwgYXBwZGlyUGF0aCA9IHZmcy5wYXRoKHBhdGgpDQogICAgbG9jYWwgYXBwZGF0YVBhdGggPSB2ZnMuY29uY2F0KGFwcGRpclBhdGgsICIuYXBwZGF0YSIpDQoNCiAgICBsb2NhbCBjb2RlRW5jcnlwdGVkDQogICAgbG9jYWwgdmlydHVhbERhdGEgPSAiIg0KDQogICAgbG9jYWwgY3JlYXRlRW52DQogICAgY3JlYXRlRW52ID0gZnVuY3Rpb24gKCkNCiAgICAgICAgbG9jYWwgZW52ID0gcHJvY2Vzcy5jcmVhdGVFbnYoKQ0KICAgICAgICBlbnYubG9hZGZpbGUgPSBsb2FkZmlsZQ0KICAgICAgICBlbnYucmVxdWlyZSA9IHJlcXVpcmUNCiAgICAgICAgZW52LmRvZmlsZSA9IGRvZmlsZQ0KDQogICAgICAgIGZ1bmN0aW9uIGVudi5nZXRDb21wb25lbnRzKG5hbWUpDQogICAgICAgICAgICBsb2NhbCBjb21wb25lbnRzID0gZ2V0Q29tcG9uZW50cyhuYW1lKQ0KICAgICAgICAgICAgaWYgbmFtZSA9PSAidGVybWluYWwiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBhcmdzLnRlcm1pbmFsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWFrZUNvbXBvbmVudFByaW1hcnkoY29tcG9uZW50cywgYXJncy50ZXJtaW5hbCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBuYW1lID09ICJkaXNwbGF5IiB0aGVuDQogICAgICAgICAgICAgICAgaWYgYXJncy5kaXNwbGF5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWFrZUNvbXBvbmVudFByaW1hcnkoY29tcG9uZW50cywgYXJncy5kaXNwbGF5KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICByZXR1cm4gY29tcG9uZW50cw0KICAgICAgICBlbmQNCg0KICAgICAgICBmdW5jdGlvbiBlbnYuZ2V0Q29tcG9uZW50KG5hbWUpDQogICAgICAgICAgICByZXR1cm4gZW52LmdldENvbXBvbmVudHMobmFtZSkgb3IgZXJyb3IoInRoZSBcIiIgLi4gbmFtZSAuLiAiXCIgY29tcG9uZW50IGlzIG1pc3NpbmciLCAyKQ0KICAgICAgICBlbmQNCg0KICAgICAgICBmdW5jdGlvbiBlbnYuc2V0Q29kZShjb2RlKQ0KICAgICAgICAgICAgY2hlY2tBcmcoMSwgY29kZSwgInN0cmluZyIpDQogICAgICAgICAgICB2ZnM6cFdyaXRlRmlsZShwYXRoLCBjb2RlKQ0KICAgICAgICAgICAgYXBwQ29kZSA9IGNvZGUNCiAgICAgICAgICAgIGNvZGVFbmNyeXB0ZWQgPSBmYWxzZQ0KICAgICAgICBlbmQNCg0KICAgICAgICBmdW5jdGlvbiBlbnYuZ2V0Q29kZSgpDQogICAgICAgICAgICBpZiBjb2RlRW5jcnlwdGVkIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gIlRISVMgQ09ERSBXQVMgRU5DUllQVEVEIg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICByZXR1cm4gYXBwQ29kZQ0KICAgICAgICBlbmQNCg0KICAgICAgICBmdW5jdGlvbiBlbnYuc2V0RGF0YShjb2RlKQ0KICAgICAgICAgICAgY2hlY2tBcmcoMSwgY29kZSwgInN0cmluZyIpDQogICAgICAgICAgICBpZiBhcHBkYXRhUGF0aCB0aGVuDQogICAgICAgICAgICAgICAgdmZzOnBXcml0ZUZpbGUoYXBwZGF0YVBhdGgsIGNvZGUpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHZpcnR1YWxEYXRhID0gY29kZQ0KICAgICAgICBlbmQNCg0KICAgICAgICBmdW5jdGlvbiBlbnYuZ2V0RGF0YSgpDQogICAgICAgICAgICByZXR1cm4gdmZzOnBSZWFkRmlsZShhcHBkYXRhUGF0aCkgb3IgdmlydHVhbERhdGENCiAgICAgICAgZW5kDQoNCiAgICAgICAgZnVuY3Rpb24gZW52LnNldEVuY3J5cHRlZENvZGUoYnl0ZWNvZGUsIG1lc3NhZ2UpDQogICAgICAgICAgICBjaGVja0FyZygxLCBieXRlY29kZSwgInN0cmluZyIpDQogICAgICAgICAgICBjaGVja0FyZygyLCBtZXNzYWdlLCAic3RyaW5nIiwgIm5pbCIpDQogICAgICAgICAgICB2ZnM6cFdyaXRlRmlsZShwYXRoLCBieXRlY29kZSkNCiAgICAgICAgICAgIGNvZGVFbmNyeXB0ZWQgPSB0cnVlDQogICAgICAgIGVuZA0KDQogICAgICAgIGZ1bmN0aW9uIGVudi5lbmNyeXB0Q29kZShtZXNzYWdlKQ0KICAgICAgICAgICAgY2hlY2tBcmcoMSwgbWVzc2FnZSwgInN0cmluZyIsICJuaWwiKQ0KICAgICAgICAgICAgaWYgY29kZUVuY3J5cHRlZCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGJ5dGVjb2RlID0gZW5sdWEuY29tcGlsZShhcHBDb2RlKQ0KICAgICAgICAgICAgaWYgYnl0ZWNvZGUgdGhlbg0KICAgICAgICAgICAgICAgIHZmczpwV3JpdGVGaWxlKHBhdGgsIGJ5dGVjb2RlKQ0KICAgICAgICAgICAgICAgIGNvZGVFbmNyeXB0ZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZA0KDQogICAgICAgIGZ1bmN0aW9uIGVudi5pc0NvZGVFbmNyeXB0ZWQoKQ0KICAgICAgICAgICAgcmV0dXJuIGNvZGVFbmNyeXB0ZWQNCiAgICAgICAgZW5kDQoNCiAgICAgICAgZW52LnN5c3RlbWVudiA9IF9HDQogICAgICAgIHJldHVybiBlbnYNCiAgICBlbmQNCg0KICAgIGxvY2FsIGFwcFByb2Nlc3MgPSBzeXN0ZW0ucHJvY2Vzc2hvc3Q6Y3JlYXRlKGNyZWF0ZUVudikNCg0KICAgIGxvY2FsIGFwcGluZm8NCiAgICBmb3IgXywgbG9jYWxBcHBpbmZvIGluIGlwYWlycyhzeXN0ZW0uaW5zdGFsbGVkQXBwcygpKSBkbw0KICAgICAgICBpZiBzeXN0ZW0uZnM6ZXF1YWxzKGxvY2FsQXBwaW5mby5kaXIsIGFwcGRpclBhdGgpIHRoZW4NCiAgICAgICAgICAgIGFwcGluZm8gPSBsb2NhbEFwcGluZm8NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgbG9jYWwgc2NyaXB0RGF0YSA9IHsNCiAgICAgICAgYXJncyA9IGFyZ3MsDQogICAgICAgIHR5cGUgPSAiYXBwIiwNCiAgICAgICAgcHJvY2VzcyA9IGFwcFByb2Nlc3MsDQogICAgICAgIGFwcGluZm8gPSBhcHBpbmZvLA0KICAgICAgICBzZWxmU2NyaXB0UGF0aCA9IHBhdGgsDQogICAgICAgIHNlbGZTY3JpcHREaXJlY3RvcnkgPSB2ZnMucGF0aChwYXRoKQ0KICAgIH0NCg0KICAgIGlmIGVubHVhLmxvYWQoYXBwQ29kZSkgdGhlbg0KICAgICAgICBjb2RlRW5jcnlwdGVkID0gdHJ1ZQ0KICAgICAgICBhcHBQcm9jZXNzOmVubHVhTG9hZChhcHBDb2RlLCBzY3JpcHREYXRhKQ0KICAgIGVsc2UNCiAgICAgICAgY29kZUVuY3J5cHRlZCA9IGZhbHNlDQogICAgICAgIGFwcFByb2Nlc3M6bG9hZChhcHBDb2RlLCAiPSIgLi4gcGF0aCwgbmlsLCBzY3JpcHREYXRhKQ0KICAgIGVuZA0KICAgIA0KICAgIHJldHVybiBzY3JpcHREYXRhDQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLmV4ZWN1dGUobmFtZSwgYXJncykNCiAgICBsb2NhbCByZXN1bHQNCiAgICBsb2NhbCBmdW5jdGlvbiB0cnkocGF0aCkNCiAgICAgICAgbG9jYWwgZnVuYyA9IGxvYWRmaWxlKHBhdGgpDQogICAgICAgIGlmIGZ1bmMgdGhlbg0KICAgICAgICAgICAgcmVzdWx0ID0gcmF3RXhlY3V0ZShwYXRoLCBhcmdzKQ0KICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBpZiB0cnkobmFtZSkgdGhlbiByZXR1cm4gcmVzdWx0IGVuZA0KICAgIGZvciBfLCBkaXIgaW4gaXBhaXJzKHN5c3RlbS5hcHBEaXJzKSBkbw0KICAgICAgICBpZiB0cnkodmZzLmNvbmNhdChkaXIsIG5hbWUgLi4gIi5hcHAiLCAibWFpbi5sdWEiKSkgdGhlbg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdA0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIHJldHVybiBuaWwsICJmYWlsZWQgdG8gZmluZCBhcHAiDQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLmluaXRBcHAoYXBwaW5mbykNCiAgICBmb3IgaSA9ICNzeXN0ZW0uaW5pdGlhbGl6ZWRBcHBzLCAxLCAtMSBkbw0KICAgICAgICBsb2NhbCBsb2NhbEluaXRhcHBpbmZvID0gc3lzdGVtLmluaXRpYWxpemVkQXBwc1tpXQ0KICAgICAgICBpZiBsb2NhbEluaXRhcHBpbmZvLmFwcGluZm8uZGlyID09IGFwcGluZm8uZGlyIHRoZW4NCiAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGxvY2FsIHNlcnZpY2VQcm9jZXNzDQoNCiAgICBsb2NhbCBzZXJ2aWNlUGF0aCA9IHZmcy5jb25jYXQoYXBwaW5mby5kaXIsICJzZXJ2aWNlLmx1YSIpDQogICAgaWYgc3lzdGVtLmZzOnBIYXNGaWxlKHNlcnZpY2VQYXRoKSB0aGVuDQogICAgICAgIHNlcnZpY2VQcm9jZXNzID0gc3lzdGVtLmV4ZWN1dGUoc2VydmljZVBhdGgpDQogICAgZW5kDQoNCiAgICBsb2NhbCBpbml0YXBwaW5mbyA9IHsNCiAgICAgICAgYXBwaW5mbyA9IGFwcGluZm8sDQogICAgICAgIHNlcnZpY2VQcm9jZXNzID0gc2VydmljZVByb2Nlc3MNCiAgICB9DQogICAgDQogICAgdGFibGUuaW5zZXJ0KHN5c3RlbS5pbml0aWFsaXplZEFwcHMsIGluaXRhcHBpbmZvKQ0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLnBhcnNlQ29tbWFuZChpbnB1dCkNCiAgICBsb2NhbCBjb21tYW5kVGFibGUgPSB7fQ0KICAgIGxvY2FsIGN1cnJlbnQgPSAiIg0KICAgIGxvY2FsIGluUXVvdGVzID0gZmFsc2UNCg0KICAgIGZvciBpID0gMSwgI2lucHV0IGRvDQogICAgICAgIGxvY2FsIGNoYXIgPSBpbnB1dDpzdWIoaSwgaSkNCg0KICAgICAgICBpZiBjaGFyID09ICciJyB0aGVuDQogICAgICAgICAgICBpblF1b3RlcyA9IG5vdCBpblF1b3Rlcw0KICAgICAgICBlbHNlaWYgY2hhciA9PSAnXFwnIGFuZCBpblF1b3RlcyB0aGVuDQogICAgICAgICAgICBsb2NhbCBuZXh0Q2hhciA9IGlucHV0OnN1YihpICsgMSwgaSArIDEpDQogICAgICAgICAgICBpZiBuZXh0Q2hhciA9PSAnbicgdGhlbg0KICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50IC4uICdcbicNCiAgICAgICAgICAgICAgICBpID0gaSArIDENCiAgICAgICAgICAgIGVsc2VpZiBuZXh0Q2hhciA9PSAnXFwnIHRoZW4NCiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudCAuLiAnXFwnDQogICAgICAgICAgICAgICAgaSA9IGkgKyAxDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQgLi4gY2hhcg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBjaGFyID09ICcgJyBhbmQgbm90IGluUXVvdGVzIHRoZW4NCiAgICAgICAgICAgIGlmICNjdXJyZW50ID4gMCB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGNvbW1hbmRUYWJsZSwgY3VycmVudCkNCiAgICAgICAgICAgICAgICBjdXJyZW50ID0gIiINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudCAuLiBjaGFyDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgaWYgI2N1cnJlbnQgPiAwIHRoZW4NCiAgICAgICAgdGFibGUuaW5zZXJ0KGNvbW1hbmRUYWJsZSwgY3VycmVudCkNCiAgICBlbmQNCg0KICAgIHJldHVybiBjb21tYW5kVGFibGUNCmVuZA0KDQpmdW5jdGlvbiBzeXN0ZW0udW5pbml0QXBwKGFwcGluZm8pDQogICAgbG9jYWwgaW5pdGFwcGluZm8NCg0KICAgIGZvciBpID0gI3N5c3RlbS5pbml0aWFsaXplZEFwcHMsIDEsIC0xIGRvDQogICAgICAgIGxvY2FsIGxvY2FsSW5pdGFwcGluZm8gPSBzeXN0ZW0uaW5pdGlhbGl6ZWRBcHBzW2ldDQogICAgICAgIGlmIGxvY2FsSW5pdGFwcGluZm8uYXBwaW5mby5kaXIgPT0gYXBwaW5mby5kaXIgdGhlbg0KICAgICAgICAgICAgaW5pdGFwcGluZm8gPSBsb2NhbEluaXRhcHBpbmZvDQogICAgICAgICAgICB0YWJsZS5yZW1vdmUoc3lzdGVtLmluaXRpYWxpemVkQXBwcywgaSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgaWYgaW5pdGFwcGluZm8gdGhlbg0KICAgICAgICBpZiBpbml0YXBwaW5mby5zZXJ2aWNlUHJvY2VzcyB0aGVuDQogICAgICAgICAgICBpbml0YXBwaW5mby5zZXJ2aWNlUHJvY2VzczpkZXN0cm95KCkNCiAgICAgICAgICAgIGluaXRhcHBpbmZvLnNlcnZpY2VQcm9jZXNzID0gbmlsDQogICAgICAgIGVuZA0KDQogICAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQoNCiAgICByZXR1cm4gZmFsc2UNCmVuZA0KDQpmdW5jdGlvbiBzeXN0ZW0udW5pbnN0YWxsQXBwKGFwcGluZm8pDQogICAgbG9jYWwgZXhpc3RzID0gc3lzdGVtLmZzOnBIYXNGb2xkZXIoYXBwaW5mby5kaXIpDQogICAgaWYgZXhpc3RzIHRoZW4NCiAgICAgICAgc3lzdGVtLnVuaW5pdEFwcChhcHBpbmZvKQ0KICAgICAgICBzeXN0ZW0uZnM6cmVjdXJzaW9uRGVsZXRlKGFwcGluZm8uZGlyKQ0KICAgICAgICByZXR1cm4gbm90IHN5c3RlbS5mczpwSGFzRm9sZGVyKGFwcGluZm8uZGlyKQ0KICAgIGVuZA0KICAgIHJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIHN5c3RlbS5jbG9zZUFwcChzY3JpcHREYXRhKQ0KICAgIHNjcmlwdERhdGEucHJvY2VzczpkZXN0cm95KCkNCmVuZA0KDQpmdW5jdGlvbiBzeXN0ZW0uaXNSdW5uaW5nKHNjcmlwdERhdGEpDQogICAgcmV0dXJuIG5vdCBzY3JpcHREYXRhLnByb2Nlc3M6aXNTdG9wcGVkKCkNCmVuZA0KDQpmdW5jdGlvbiBzeXN0ZW0uaXNTeXN0ZW1BcHAoYXBwaW5mbykNCiAgICByZXR1cm4gdmZzLmNvbmNhdChzeXN0ZW0uYXBwRGlyc1sxXSwgYXBwaW5mby5iYXNlRGlyKQ0KZW5kDQoNCmxvY2FsIGRlZmF1bHRBcHBDb25maWcgPSB7DQogICAgdGVybWluYWwgPSB0cnVlLA0KICAgIGRpc3BsYXkgPSB0cnVlLA0KICAgIGd1aSA9IGZhbHNlLA0KICAgIGhpZGRlbiA9IGZhbHNlDQp9DQoNCmxvY2FsIGZ1bmN0aW9uIGNvbmZpZ1Byb2Nlc3MoY29uZmlnKQ0KICAgIGZvciBrLCB2IGluIHBhaXJzKGRlZmF1bHRBcHBDb25maWcpIGRvDQogICAgICAgIGlmIGNvbmZpZ1trXSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgY29uZmlnW2tdID0gdg0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gY29uZmlnDQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLmdldEFwcENvbmZpZyhhcHBpbmZvKQ0KICAgIGxvY2FsIGNvbmZpZ1BhdGggPSB2ZnMuY29uY2F0KGFwcGluZm8uZGlyLCAiY29uZmlnLmpzb24iKQ0KICAgIGlmIHN5c3RlbS5mczpwSGFzRmlsZShjb25maWdQYXRoKSB0aGVuDQogICAgICAgIGxvY2FsIGNvbmZpZ0RhdGEgPSBzeXN0ZW0uZnM6cFJlYWRGaWxlKGNvbmZpZ1BhdGgpDQogICAgICAgIGxvY2FsIG9rLCByZXN1bHQgPSBwY2FsbChqc29uLm5hdGl2ZURlY29kZSwgY29uZmlnRGF0YSkNCiAgICAgICAgaWYgb2sgdGhlbg0KICAgICAgICAgICAgcmV0dXJuIGNvbmZpZ1Byb2Nlc3MocmVzdWx0KQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gY29uZmlnUHJvY2Vzcyh7fSkNCmVuZA0KDQpmdW5jdGlvbiBzeXN0ZW0uaW5zdGFsbGVkQXBwcygpDQogICAgbG9jYWwgbGlzdCA9IHt9DQogICAgZm9yIF8sIGRpciBpbiBpcGFpcnMoc3lzdGVtLmFwcERpcnMpIGRvDQogICAgICAgIGZvciBfLCBuYW1lIGluIGlwYWlycyhzeXN0ZW0uZnM6cEdldEZvbGRlckxpc3QoZGlyKSkgZG8NCiAgICAgICAgICAgIGxvY2FsIGFwcGRpciA9IHZmcy5jb25jYXQoZGlyLCBuYW1lKQ0KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpc3QsIHtuYW1lID0gdmZzLmhpZGVFeHRlbnNpb24obmFtZSksIGRpciA9IGFwcGRpciwgYmFzZURpciA9IGRpciwgZXhlYyA9IHZmcy5jb25jYXQoYXBwZGlyLCAibWFpbi5sdWEiKX0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBsaXN0DQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLmZpbHRlcmVkQXBwcyhyZXF1aXJlbWVudHMpDQogICAgbG9jYWwgbGlzdCA9IHt9DQogICAgZm9yIF8sIGFwcGluZm8gaW4gaXBhaXJzKHN5c3RlbS5pbnN0YWxsZWRBcHBzKCkpIGRvDQogICAgICAgIGxvY2FsIGNvbmZpZyA9IHN5c3RlbS5nZXRBcHBDb25maWcoYXBwaW5mbykNCiAgICAgICAgaWYgbm90IGNvbmZpZy5oaWRkZW4gdGhlbg0KICAgICAgICAgICAgbG9jYWwgbWVldFJlcXVpcmVtZW50cyA9IHRydWUNCiAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKHJlcXVpcmVtZW50cykgZG8NCiAgICAgICAgICAgICAgICBpZiBjb25maWdba10gfj0gdiB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lZXRSZXF1aXJlbWVudHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZWV0UmVxdWlyZW1lbnRzIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGlzdCwgYXBwaW5mbykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gbGlzdA0KZW5kDQoNCmZ1bmN0aW9uIHN5c3RlbS5maW5kQXBwQnlOYW1lKG5hbWUpDQogICAgZm9yIF8sIGFwcGluZm8gaW4gaXBhaXJzKHN5c3RlbS5pbnN0YWxsZWRBcHBzKCkpIGRvDQogICAgICAgIGlmIGFwcGluZm8ubmFtZSA9PSBuYW1lIHRoZW4NCiAgICAgICAgICAgIHJldHVybiBhcHBpbmZvDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIHN5c3RlbS5tb3VudCh0YWcsIGluZGV4LCBjb21wb25lbnQpDQogICAgbG9jYWwgcGF0aA0KICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgcGF0aCA9ICIvIiAuLiB0YWcgLi4gaW5kZXgNCiAgICAgICAgaWYgbm90IHN5c3RlbS5mczpoYXNNb3VudChwYXRoKSB0aGVuDQogICAgICAgICAgICBzeXN0ZW0uZnM6bW91bnQocGF0aCwgY29tcG9uZW50KQ0KICAgICAgICAgICAgcmV0dXJuIHBhdGgNCiAgICAgICAgZW5kDQogICAgICAgIGluZGV4ID0gaW5kZXggKyAxDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gc3lzdGVtLmNoZWNrQXR0YWNoRGV0YWNoQ29tcG9uZW50cyhjdHlwZSwgY2hlY2tUYWJsZSwgY2FsbGJhY2spDQogICAgZm9yIGluZGV4LCBjb21wb25lbnQgaW4gaXBhaXJzKGdldENvbXBvbmVudHMoY3R5cGUpKSBkbw0KICAgICAgICBpZiBub3QgY2hlY2tUYWJsZVtjb21wb25lbnRdIHRoZW4NCiAgICAgICAgICAgIGNoZWNrVGFibGVbY29tcG9uZW50XSA9IHtpbmRleCA9IGluZGV4fQ0KICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgY29tcG9uZW50LCBjaGVja1RhYmxlW2NvbXBvbmVudF0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgZm9yIGNvbXBvbmVudCwgZGF0YSBpbiBwYWlycyhjaGVja1RhYmxlKSBkbw0KICAgICAgICBpZiBub3QgaXNDb21wb25lbnRBdmFpbGFibGUoY29tcG9uZW50KSB0aGVuDQogICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgY29tcG9uZW50LCBkYXRhKQ0KICAgICAgICAgICAgY2hlY2tUYWJsZVtjb21wb25lbnRdID0gbmlsDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIGxvYWRmaWxlKHBhdGgsIG1vZGUsIGVudikNCiAgICBsb2NhbCBmaWxlID0gc3lzdGVtLmZzOnBSZWFkRmlsZShwYXRoKQ0KICAgIGlmIG5vdCBmaWxlIHRoZW4NCiAgICAgICAgcmV0dXJuIG5pbCwgImZpbGUgbm90IGZvdW5kIg0KICAgIGVuZA0KDQogICAgcmV0dXJuIGxvYWQoZmlsZSwgIj0iIC4uIHBhdGgsIG1vZGUsIGVudikNCmVuZA0KDQpmdW5jdGlvbiBkb2ZpbGUocGF0aCwgLi4uKQ0KICAgIHJldHVybiBhc3NlcnQobG9hZGZpbGUocGF0aCkpKC4uLikNCmVuZA0KDQpsb2NhbCBfcmVxdWlyZSA9IHJlcXVpcmUNCmZ1bmN0aW9uIHJlcXVpcmUobmFtZSkgLS1yZWRlZmluaW5nIHRoZSBzdGFuZGFyZCByZXF1aXJlIGZ1bmN0aW9uIGluIHRoZSBtb2QgdG8gYWRkIGxvYWRpbmcgb2Ygc3lzdGVtIGxpYnJhcmllcw0KICAgIGlmIHN5c3RlbS5sb2FkZWRMaWJzW25hbWVdIHRoZW4NCiAgICAgICAgcmV0dXJuIHN5c3RlbS5sb2FkZWRMaWJzW25hbWVdDQogICAgZW5kDQoNCiAgICBsb2NhbCBsaWJyYXJ5DQogICAgbG9jYWwgZnVuY3Rpb24gdHJ5KHBhdGgpDQogICAgICAgIGxvY2FsIGZ1bmMgPSBsb2FkZmlsZShwYXRoKQ0KICAgICAgICBpZiBmdW5jIHRoZW4NCiAgICAgICAgICAgIGxpYnJhcnkgPSBmdW5jKHsNCiAgICAgICAgICAgICAgICBzZWxmU2NyaXB0UGF0aCA9IHBhdGgsDQogICAgICAgICAgICAgICAgc2VsZlNjcmlwdERpcmVjdG9yeSA9IHZmcy5wYXRoKHBhdGgpLA0KICAgICAgICAgICAgICAgIHR5cGUgPSAibGliIg0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHN5c3RlbS5sb2FkZWRMaWJzW25hbWVdID0gbGlicmFyeQ0KICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBpZiB0cnkobmFtZSkgdGhlbiByZXR1cm4gbGlicmFyeSBlbmQNCiAgICBmb3IgXywgZGlyIGluIGlwYWlycyhzeXN0ZW0ubGliRGlycykgZG8NCiAgICAgICAgaWYgdHJ5KHZmcy5jb25jYXQoZGlyLCBuYW1lIC4uICIubHVhIikpIHRoZW4NCiAgICAgICAgICAgIHJldHVybiBsaWJyYXJ5DQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIA0KICAgIGxpYnJhcnkgPSBfcmVxdWlyZShuYW1lKQ0KICAgIHN5c3RlbS5sb2FkZWRMaWJzW25hbWVdID0gbGlicmFyeQ0KICAgIHJldHVybiBsaWJyYXJ5DQplbmQNCg0KcmV0dXJuIHN5c3RlbQ==", "services/mounting.lua": "bG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCg0KbG9jYWwgZGlza3NBdHRhY2hDaGVjayA9IHt9DQpsb2NhbCByb21zQXR0YWNoQ2hlY2sgPSB7fQ0KZnVuY3Rpb24gb25UaWNrKCkNCiAgICBzeXN0ZW0uY2hlY2tBdHRhY2hEZXRhY2hDb21wb25lbnRzKCJkaXNrIiwgZGlza3NBdHRhY2hDaGVjaywgZnVuY3Rpb24gKGF0dGFjaCwgY29tcG9uZW50LCBkYXRhKQ0KICAgICAgICBpZiBhdHRhY2ggdGhlbg0KICAgICAgICAgICAgc3lzdGVtLm1vdW50KCJkaXNrIiwgZGF0YS5pbmRleCwgY29tcG9uZW50KQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBzeXN0ZW0uZnM6dW5tb3VudChjb21wb25lbnQpDQogICAgICAgIGVuZA0KICAgIGVuZCkNCg0KICAgIHN5c3RlbS5jaGVja0F0dGFjaERldGFjaENvbXBvbmVudHMoInJvbSIsIHJvbXNBdHRhY2hDaGVjaywgZnVuY3Rpb24gKGF0dGFjaCwgY29tcG9uZW50LCBkYXRhKQ0KICAgICAgICBpZiBhdHRhY2ggdGhlbg0KICAgICAgICAgICAgbG9jYWwgb2ssIHJlc3VsdCA9IHBjYWxsKGNvbXBvbmVudC5vcGVuRmlsZXN5c3RlbUltYWdlKQ0KICAgICAgICAgICAgaWYgb2sgYW5kIHR5cGUocmVzdWx0KSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICBkYXRhLmZzID0gcmVzdWx0DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgb2ssIHJlc3VsdCA9IHBjYWxsKGNvbXBvbmVudC5vcGVuRmlsZXN5c3RlbUR1bXApDQogICAgICAgICAgICAgICAgaWYgb2sgYW5kIHR5cGUocmVzdWx0KSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZGF0YS5mcyA9IHJlc3VsdA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGlmIGRhdGEuZnMgdGhlbg0KICAgICAgICAgICAgICAgIHN5c3RlbS5tb3VudCgicm9tIiwgZGF0YS5pbmRleCwgZGF0YS5mcykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgZGF0YS5mcyB0aGVuDQogICAgICAgICAgICBzeXN0ZW0uZnM6dW5tb3VudChkYXRhLmZzKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KX2VuYWJsZUNhbGxiYWNrcyA9IHRydWU=", "services/runshell.lua": "bG9jYWwgc3lzdGVtID0gcmVxdWlyZSgic3lzdGVtIikNCg0KbG9jYWwgdGVybWluYWxBdHRhY2hDaGVjayA9IHt9DQpsb2NhbCBkaXNwbGF5QXR0YWNoQ2hlY2sgPSB7fQ0KZnVuY3Rpb24gb25UaWNrKCkNCiAgICBzeXN0ZW0uY2hlY2tBdHRhY2hEZXRhY2hDb21wb25lbnRzKCJ0ZXJtaW5hbCIsIHRlcm1pbmFsQXR0YWNoQ2hlY2ssIGZ1bmN0aW9uIChhdHRhY2gsIGNvbXBvbmVudCwgZGF0YSkNCiAgICAgICAgaWYgYXR0YWNoIHRoZW4NCiAgICAgICAgICAgIGRhdGEuc2NyaXB0RGF0YSA9IGFzc2VydChzeXN0ZW0uZXhlY3V0ZSgidGVybWluYWxfc2hlbGwiLCB7DQogICAgICAgICAgICAgICAgdGVybWluYWwgPSBjb21wb25lbnQNCiAgICAgICAgICAgIH0pKQ0KICAgICAgICBlbHNlaWYgZGF0YS5zY3JpcHREYXRhIHRoZW4NCiAgICAgICAgICAgIGRhdGEuc2NyaXB0RGF0YS5wcm9jZXNzOmRlc3Ryb3koKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQoNCiAgICBzeXN0ZW0uY2hlY2tBdHRhY2hEZXRhY2hDb21wb25lbnRzKCJkaXNwbGF5IiwgZGlzcGxheUF0dGFjaENoZWNrLCBmdW5jdGlvbiAoYXR0YWNoLCBjb21wb25lbnQsIGRhdGEpDQogICAgICAgIGlmIGF0dGFjaCB0aGVuDQogICAgICAgICAgICBkYXRhLnNjcmlwdERhdGEgPSBhc3NlcnQoc3lzdGVtLmV4ZWN1dGUoImd1aV9zaGVsbCIsIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5ID0gY29tcG9uZW50DQogICAgICAgICAgICB9KSkNCiAgICAgICAgZWxzZWlmIGRhdGEuc2NyaXB0RGF0YSB0aGVuDQogICAgICAgICAgICBkYXRhLnNjcmlwdERhdGEucHJvY2VzczpkZXN0cm95KCkNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQoNCl9lbmFibGVDYWxsYmFja3MgPSB0cnVl"}